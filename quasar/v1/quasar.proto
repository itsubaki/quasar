syntax = "proto3";

package quasar.v1;

import "google/protobuf/timestamp.proto";

option go_package = "github.com/itsubaki/quasar/gen/quasar/v1;quasarv1";

message SimulateRequest {
  string code = 1;
}

message SimulateResponse {
  message Amplitude {
    double real = 1;
    double imag = 2;
  }

  message State {
    Amplitude amplitude = 1;
    double probability = 2;
    repeated uint64 int = 3;
    repeated string binary_string = 4;
  }

  repeated State states = 1;
}

message ShareRequest {
  string code = 1;
}

message ShareResponse {
  string id = 1;
  google.protobuf.Timestamp created_at = 2;
}

message EditRequest {
  string id = 1;
}

message EditResponse {
  string id = 1;
  string code = 2;
  google.protobuf.Timestamp created_at = 3;
}

service QuasarService {
  rpc Simulate(SimulateRequest) returns (SimulateResponse) {};
  rpc Share(ShareRequest) returns (ShareResponse) {};
  rpc Edit(EditRequest) returns (EditResponse) {};
}
